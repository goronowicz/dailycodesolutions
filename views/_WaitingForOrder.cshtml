<!-- ko with: waitingForOrder -->

<form>
    <h2>Oczekiwanie na zamówienie</h2>
    <hr />
    <div id="process" style="margin-left: auto;margin-right: auto;">
        <div class="progress progress-striped active" style="width: 100%; height: 30px;">
            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%; line-height:30px;">
                Waiting for getting data ...
            </div>
        </div>
    </div>
    <div id="complete" style="display:none;">
        <div class="form-group row" style="width: 91% !important">
            <div class="col-md-6" style="display:inline">
                <p>Restauracja: <strong data-bind="text: supplier"></strong></p>
                <h5>Link do zamówienia: <a class="link" data-bind="href: orderLink, text: orderLink, click: copyToClipboard"></a></h5>
            </div>
            <div class="col-md-6" style="text-align:right">
                <p>Deadline: <strong data-bind="text: deadLineDisp"></strong></p>
            </div>
        </div>

        <h3>Czas oczekiwania: <span data-bind="text: time"></span></h3>
        <div class="cols-xs-8">
            <table class="table table-bordered table-striped table-hover sortable" style="width: 91% !important">
                <thead>
                    <tr>
                        <th class="col-xs-5" onclick="sort();" data-defaultsort="asc" data-sortcolumn="0" data-sortkey="0-1">Co</th>
                        <th class="col-xs-2" onclick="sort();" data-defaultsort="asc" data-sortcolumn="0" data-sortkey="0-1">Ilość</th>
                        <th class="col-xs-2" onclick="sort();" data-defaultsort="asc" data-sortcolumn="0" data-sortkey="0-1">Cena</th>
                        <th class="col-xs-2" onclick="sort();" data-defaultsort="asc" data-sortcolumn="0" data-sortkey="0-1">Suma</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: dishListWithoutDuplicates">
                    <tr>
                        <td><div data-bind="text: meal" /></td>
                        <td><div data-bind="text: $parent.count($data)" /></td>
                        <td><span data-bind="text: price.toFixed(2)">@Resources.Resources.currency</span></td>
                        <td><span data-bind="text: $parent.sum(price, $parent.count($data))">@Resources.Resources.currency</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="form-group row">
            <div class="col-xs-9"></div>
            <div class="col-xs-2">
                <h3>Suma  <span data-bind="text: suma"></span>@Resources.Resources.currency</h3>
            </div>
        </div>
        <!-- ko if: !supplied() -->
        <div class="form-group row">
            <div class="col-xs-9"></div>
            <div class="col-xs-2">
                <button type="submit" class="btn btn-default btn-block pull-left" data-bind="click: goToSummary">Dostarczone</button>
            </div>
        </div>
        <!-- /ko-->
    </div>
</form>

<br />
@Html.Partial("_Chat")
<!-- /ko -->
