<template>
  <require from="converters/date-format"></require>
  <require from="widgets/date-picker"></require>
    <div class="cols-xs-10">
        <table class="table table-bordered table-striped table-hover sortable" >
            <thead>
                <tr>
                    <th class="col-xs-4" data-defaultsort="asc" data-sortcolumn="0" data-sortkey="0-1"> Restaurant</th>
                    <th class="col-xs-2" data-defaultsort="asc" data-sortcolumn="1" data-sortkey="0-1"> Deadline</th>
                    <th class="col-xs-2" data-defaultsort="asc" data-sortcolumn="1" data-sortkey="0-1"> Status</th>
                    <th class="col-xs-2" data-defaultsort="asc" data-sortcolumn="1" data-sortkey="0-1"> Id</th>
                    <th class="col-xs-2" data-defaultsort="asc" data-sortcolumn="1" data-sortkey="0-1"> Action</th>
                </tr>
            </thead>
            <tbody >

                <tr repeat.for ="order of orders">
                  <template if.bind="!order.isEdit">
                    <td class="col-xs-4" >${order.Restaurant.Name}</td>
                    <td class="col-xs-2" >${order.Deadline}</td>
                    <td class="col-xs-2" >${order.Status }</td>
                    <td class="col-xs-2" >${order.id}</td>
                      <td>
                          <a href="#" class="btn glyphicon glyphicon-pencil" click.delegate="$parent.editOrder(order)" ></a>
                          <a href="#" class="btn glyphicon glyphicon-trash" click.delegate="$parent.deleteOrder(order)"></a>
                      </td>
                  </template>
                  <template if.bind="order.isEdit">
                    <td class="col-xs-4" > <input class="form-control" value.bind="order.Restaurant.Name"/></td>
                    <td class="col-xs-2" >
                      <date-picker value.two-way="order.Deadline" ></date-picker>
                    </td>
                    <td class="col-xs-2" >
                      <select class="form-control" value.bind="order.Status">
                        <option>New</option>
                        <option>Collecting</option>
                        <option>Ordering</option>
                        <option>Await</option>
                        <option>Delivered</option>
                      </select>
                    </td>
                    <td class="col-xs-2" ></td>
                      <td>
                          <a href="#" class="btn glyphicon glyphicon-floppy-saved" click.delegate="$parent.saveOrder(order)"></a>
                          <a href="#" class="btn glyphicon glyphicon-floppy-remove" click.delegate="$parent.cancelOrder(order)"></a>
                      </td>
                  </template>


                </tr>
                <tr>
                    <td>
                        <input class="form-control" type="text" value.bind="newItem.RestaurantName"/>
                    </td>
                    <td>
                      <date-picker value.two-way="newItem.Deadline" ></date-picker>
                    </td>
                    <td>
                      <select class="form-control" value.bind="newItem.Status">
                        <option>New</option>
                        <option>Collecting</option>
                        <option>Ordering</option>
                        <option>Await</option>
                        <option>Delivered</option>
                      </select>
                    </td>
                    <td></td>
                    <td><a href="#" class="btn btn-success" click.delegate="addOrder()">Add</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</template>
